<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.0.0.min.js"></script>
    <script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div>
        <form id="search_form">
            <input type="text" placeholder="请输入你的搜索关键词" id="search_input" name="seed_word">
            <input type="button" value="搜索" id="search_button" onclick="getSearchResult()">
        </form>
    </div>
    <div style="width: 600px; height: 400px; margin-top:100px; margin-left:100px" id="chart">

    </div>

</body>
<script>
    function getSearchResult(){
        let seed_word = $('#search_input').val()
        console.log('获取种子关键词' + seed_word + '相关搜索中')
        $.ajax({
            type:'GET',
            url:'http://localhost:5000/getResult',
            data: {'seed_word':seed_word},
            dataType: 'json',
            crossDomain: true,
            success: function (result) {
                console.log(result)
                console.log(result.data)
                let x = []
                let y = []
                for(let i = 0; i < 10; i++){
                    x[i] = result.data[i].split(' ')[0]
                    y[i] = result.data[i].split(':')[1] * 100
                }
                console.log(x)
                console.log(y)
                let searchResultChart = echarts.init(document.getElementById('chart'))
                let option = {
                    title:{
                        text: '关键词  ' + seed_word + '  的竞争关键词'
                    },
                    xAxis: {
                        type: "category",
                        data: x
                    },
                    yAxis: {
                        type: "value"
                    },
                    series: {
                        type: "bar",
                        data: y
                    },
                    tooltip: {
                        trigger: 'axis', //坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用
                        axisPointer: {// 坐标轴指示器，坐标轴触发有效
                            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                     }
            },
                }
                searchResultChart.setOption(option)
            },
            error: function (e) {
                alert('该种子关键词不存在相关搜索!')
            },

        })
    }
</script>
<style>
    #search_form
    {
        width: 500px;
        height: 100px;
    }
    #search_input
    {
        margin-top: 20%;
        width: 300px;
        height: 25px;
    }
    #search_button
    {
        width: 50px;
        height: 25px;
    }
</style>
</html>